- TYPE:
    NAME: int
    DEFINITION: int
    NATIF: true
    DEFAULT: 0

- STRUCT:
    NAME: Pair
    DATA:
      - int a WITH 1
      - int b WITH 10
    DEFAULT: {"a":1,"b":10}

- STRUCT:
    NAME: A
    DATA:
      - int a
      - int b

- STRUCT:
    NAME: B
    DATA:
      - int a
      - int b
      - A c

- STRUCT:
    NAME: B_1
    PARENT: B
    DATA:
      - int t

- STRUCT:
    NAME: B_2
    PARENT: B
    DATA:
      - int t2

- STRUCT:
    NAME: C
    DATA:
      - int a
      - int b
      - A c
      - A c1
      - A c2
      - A c3
      - B d
   

- INTERFACE:
    NAME: I1

- INTERFACE:
    NAME: I2

- INTERFACE:
    NAME: I3
    PARENT: I2

- INTERFACE:
    NAME: I4
    PARENT: I3

- INTERFACE:
    NAME: I5
    PARENT: I1

- INTERFACE:
    NAME: I6
    PARENT: I1

- INTERFACE:
    NAME: I7
    PARENT: I1


- COMPONENT:
    NAME: C1
    PROVIDE:
      - I1 a
      - I1 b
      - I1 g
    REQUIRE:
      - I1 c
      - I1 d

- COMPONENT:
    NAME: C2
    PROVIDE:
      - I1 a
      - I1 b

- COMPONENT:
    NAME: C3
    REQUIRE:
      - I1 c
      - I1 d

- LINK:
    NAME: Simple
    S:
      OUT: FALSE
      IN: FALSE
      DIRECT: TRUE

- LINK:
    NAME: Complex_out
    S:
      OUT: TRUE
      IN: FALSE
      DIRECT: FALSE

- LINK:
    NAME: Complex_in
    S:
      OUT: FALSE
      IN: TRUE
      DIRECT: FALSE
    DATA:
      - int name
      - int port

- LINK:
    NAME: Complex_out_log
    PARENT: Complex_out
    S:
      OUT: TRUE
      IN: FALSE
      DIRECT: FALSE


- LINK:
    NAME: Complex_in_log
    PARRENT: Complex_in
    S:
      OUT: FALSE
      IN: TRUE
      DIRECT: FALSE
    DATA:
      - int name
      - int port


- DEPLOYMENT:
    NAME: D1
    INSTANCE:
      - C1 ca
      - C2 cb
      - C3 cc
    CONNECTION:
      - cc.d-(s1)->cb.b
      - ca.c-(s1)->cb.a
      - ca.d-(s1)->cb.b
      - cc.c-(s1)->ca.a
    LINK_INSTANCE:
      - Simple s1


- COMPONENT:
    NAME: C4
    REQUIRE:
      - I1 a


- DEPLOYMENT:
    NAME: D2
    INSTANCE:
      - C2 ca
      - C4 cb1
      - C4 cb2
      - C4 cb3
      - C4 cb4
    CONNECTION:
      - cb1.a-(s1)->ca.a
      - cb2.a-(s1)->ca.a
      - cb3.a-(s1)->ca.b
      - cb4.a-(s1)->ca.b

    LINK_INSTANCE:
      - Simple s1


- COMPONENT:
    NAME: C5
    DATA:
      - Pair p
    PROVIDE:
      - I1 a

- COMPONENT:
    NAME: C6
    DATA:
      - int v1 DEFAULT 9
      - int v2 # default value of int
      - int v3 DEFAULT -1
    PROVIDE:
      - I1 a
    REQUIRE:
      - I1 b

- DEPLOYMENT:
    NAME: D3
    INSTANCE:
      - C4 ca
      - C5 cb
      - C4 ca2
      - C5 cb2
      - C6 cc WITH {"v1":6,"v3":6,"v2":6}
      - C6 cc2
      - C6 cc4 WITH {"v2":6}
      - C6 cc3 WITH {"v3":6}
    CONNECTION:
      - (s2)->cb2.a
      - ca2.a-(s3)
      - (s4)->cc2.a
      - cc4.b-(s5)
      - cc2.b-(s1)->cc3.a
      - cc3.b-(s1)->cc4.a
      - ca.a-(s1)->cc.a
      - cc.b-(s1)->cb.a

    LINK_INSTANCE:
      - Simple s1
      - Complex_in s2 WITH {"name":"\"lapin\""}
      - Complex_out s3
      - Complex_in s4
      - Complex_out s5

