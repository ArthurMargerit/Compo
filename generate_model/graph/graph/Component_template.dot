
digraph G {
        label = "{{NAME}}";
        node [shape=plaintext];
        rankdir=LR;

        subgraph cluster_in_pack {
                 subgraph cluster_provide {
        		              label = "PROVIDE";
                          {% include "graph/component_pro.dot"%}
	                        }
                 subgraph cluster_receiver {
                          label = "RECEIVER";
                          {% include "graph/component_receiver.dot"%}
                          }
        }
        

        subgraph cluster_sub_component {
        
		             label = "SUB_COMPONENT";

                 {% include "graph/Deployments_Instance.dot" %}
{%for c in CONNECTION %}
        {%if c.LINK == "SC_R_TO_SC_P" %}
        {{c.FROM.INSTANCE.NAME}}:{{c.FROM.INTERFACE.NAME}}:e -> {{c.TO.INSTANCE.NAME}}:{{c.TO.INTERFACE.NAME}}:w [penwidth=2.0,dir="none",color="{%with INTERFACE=c.TO.INTERFACE.INTERFACE%}{%include "graph/Connection_color.dot" with context%}{%endwith%}"];
        {%endif%}

        {%if c.LINK == "SC_E_TO_SC_R" %}
        {{c.FROM.INSTANCE.NAME}}:{{c.FROM.BUS.NAME}}:e -> {{c.TO.INSTANCE.NAME}}:{{c.TO.BUS.NAME}}:w [penwidth=2.0,dir="none"];
        {%endif%}

{% endfor %}

	      }

        subgraph cluster_data {
		             label = "data";
                 
	      }

        subgraph cluster_out_pack {
                 subgraph cluster_require {
		                      label = "REQUIRE";
                          {% include "graph/component_req.dot"%}
	               }
                 subgraph cluster_require_list {
		                      label = "REQUIRE LIST";
                          {% include "graph/component_req_list.dot"%}
	               }
                 subgraph cluster_emitter {
		                      label = "EMITTER";
                          {% include "graph/component_emitter.dot"%}
	               }
        }

        {%for c in CONNECTION %}
        {%if c.LINK =="C_P_TO_SC_P" %}
        {{c.FROM.NAME}}:e -> {{c.TO.INSTANCE.NAME}}:{{c.TO.INTERFACE.NAME}}:w [penwidth=2.0,dir="none",color="{%with INTERFACE=c.TO.INTERFACE.INTERFACE%}{%include "graph/Connection_color.dot" with context%}{%endwith%}"];
        {% elif c.LINK =="SC_R_TO_C_R" %}
        {{c.FROM.INSTANCE.NAME}}:{{c.FROM.INTERFACE.NAME}}:e ->  {{c.TO.NAME}}:w [penwidth=2.0,dir="none",color="{%with INTERFACE=c.FROM.INTERFACE.INTERFACE%}{%include "graph/Connection_color.dot" with context%}{%endwith%}"];
        {% endif%}

        {%if c.LINK == "SC_E_TO_C_E" %}
        {{c.FROM.INSTANCE.NAME}}:{{c.FROM.BUS.NAME}}:e -> {{c.TO.NAME}}:w [penwidth=2.0,dir="none"];
        {%endif%}

        {%if c.LINK == "C_R_TO_SC_R" %}
        {{c.FROM.NAME}}:e -> {{c.TO.INSTANCE.NAME}}:{{c.TO.BUS.NAME}}:w [penwidth=2.0,dir="none"];
        {%endif%}

        {%if c.LINK == "C_R_TO_C_E" %}
        {{c.FROM.NAME}}:e -> {{c.TO.NAME}}:w [penwidth=2.0,dir="none"];
        {%endif%}
        {% endfor %}
}
