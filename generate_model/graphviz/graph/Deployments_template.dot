digraph{

    label="{{NAME}}"

    node [shape=plaintext];

    subgraph clusterCOMPONENT {
        label="COMPONENT";
{% for c in INSTANCE %}
{% with NAME = c.NAME, WITH=c.WITH %}
{{ c.NAME}} [label=< {% include "graph/component/"+c.COMPONENT.NAME+".html" %} >];
{% endwith %}
{% endfor %}

{%if PARENT %}
{%if "INSTANCE" in PARENT%}
{% for c in PARENT.INSTANCE %}
{% with NAME = c.NAME, WITH=c.WITH %}
{{ c.NAME}} [label=< {% include "graph/component/"+c.COMPONENT.NAME+".html" %} >];
{% endwith %}
{% endfor %}
{% endif %}
{% endif %}

}

rankdir=LR;



subgraph clusterin {
    label="LINK IN";
    {% for l in LINK_INSTANCE %}
    {% if true == l.TYPE.S.IN %}
    {% with NAME = l.NAME, WITH=l.WITH %}
    {{l.NAME}} [label=< {% include "graph/Links/"+l.TYPE.NAME+".html" %} >]
    {% endwith %}
    {% endif %}
    {%endfor%}
}

subgraph clusterout {
    label="LINK OUT";
    {% for l in LINK_INSTANCE %}
    {% if true == l.TYPE.S.OUT%}
    {% with NAME = l.NAME, WITH=l.WITH %}
    {{l.NAME}} [label=< {% include "graph/Links/"+l.TYPE.NAME+".html" %} >]
    {% endwith %}
    {% endif %}
    {%endfor%}
}

subgraph clusterdirect {
    label="LINK DIRECT";
    {% for l in LINK_INSTANCE %}
    {% if true == l.TYPE.S.DIRECT%}
    {% with NAME = l.NAME, WITH=l.WITH %}
    {{l.NAME}} [label=< {% include "graph/Links/"+l.TYPE.NAME+".html" %} >]
    {% endwith %}
    {% endif %}
    {%endfor%}
}


{% for l in CONNECTION %}
{% if true == l.LINK.TYPE.S.OUT %}
{{l.FROM.INSTANCE.NAME}}:{{l.FROM.INTERFACE.NAME}}:e -> {{l.LINK.NAME}}:w;
{% endif %}
{% if true == l.LINK.TYPE.S.IN %}
{{l.LINK.NAME}}:e -> {{l.TO.INSTANCE.NAME}}:{{l.TO.INTERFACE.NAME}}:w;
{% endif %}
{% if true == l.LINK.TYPE.S.DIRECT %}
{{l.FROM.INSTANCE.NAME}}:{{l.FROM.INTERFACE.NAME}}:e -> {{l.TO.INSTANCE.NAME}}:{{l.TO.INTERFACE.NAME}}:w [label="{{l.LINK.NAME}}"];
{% endif %}
{% endfor %}

}
